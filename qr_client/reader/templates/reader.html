<html>
<head>
    <title>qr code reader</title>
</head>
<body>
    <h1>Si no posee de qr para acceder por favor genérelo escaneando el siguiente código qr</h1>
    {% load static %}
    <img src="{% static 'reader/url_qr.svg' %}" alt="Qr url">

    <h2>Datos QR escaneados</h2>
    <form id='qrform' name="qrform" target="{% url 'reader:index' %}" method="post">
        <input id='qrcode' name="qrcode" value="" type="text" style='width: 800px;' /><br />
        <!-- <input type="submit" hidden/> -->
        {% csrf_token %}
    </form>

    <script type="text/javascript">
        var e = document.getElementById('qrcode');
        e.focus();
        e.addEventListener("keypress", function(event) {
            if (event.which == 10 || event.which == 13) {
                console.debug('enviando qr al servidor');
                console.debug(e.value);
                document.getElementById("qrform").submit();
            }
        })

        var x = setInterval(function() {
            var e = document.getElementById('qrcode');
            e.focus();
        }, 1000);        

    </script>

</body>
</html>